!function(){let e;Object.prototype.hasOwnProperty(Object.prototype,"inherit")||Object.defineProperty(Object.prototype,"inherit",{writeable:!1,value(e,...t){return this.prototype=Object.create(e.prototype),this.prototype.constructor=this,t.length>0&&Object.assign(this.prototype,...t),this}}),Map.prototype.hasOwnProperty("arrayify")||Object.defineProperties(Map.prototype,{arrayify:{writeable:!0,value(){let e,t=this.entries();for(e=t.next();!e.done;)(void 0).push(e.value),e=t.next()}},filter:{writeable:!0,value(e){if("function"!=typeof e)throw new TypeError("The first argument must be a function");let t=new Map;return this.forEach((s,r,n)=>{let l=e(s,r,n);"boolean"==typeof l?l&&t.set(r,s):t.set(r,l)}),t}},map:{writeable:!0,value(e){if("function"!=typeof flt)throw new TypeError("The first argument must be a function");let t=new Map;return this.forEach((s,r,n)=>{let l=e(s,r,n);t.set(r,l)}),t}}}),(e=function(t,s={}){return this instanceof e?t instanceof e?t:(this.el=t,e.start.call(this)):new e(t,s)}).cc=(e=>e.replace(/[_\- ](\w)/g,(e,t)=>t.toUpperCase())),e.slice=(e=>[].slice.call(e)),e.pipeline=((t,s=!1,...r)=>{for(let n of r)t="string"===e.type(n)?(s?e:window)[n](t):n(t);return t}),e.type=function(){let e={},t=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null","Error","Symbol","Promise","NamedNodeMap","Map","NodeList","DOMTokenList","DOMStringMap","CSSStyleDeclaration"];for(let s=0,r=t.length;s<r;s++)e[`[object ${t[s]}]`]=t[s].toLowerCase();return t=>e[{}.toString.call(t)]||"object"}(),e.empty=(t=>{switch(e.type(t)){case"array":case"string":return 0===t.length;case"object":if(null!=Object.keys)return 0===Object.keys(t).length&&t.constructor===Object;for(let e in t)if(t.hasOwnProperty(e))return!1;return"{}"===JSON.stringify(t);case"regexp":return 0===t.source.length;default:console.error("Unknown type || cannot calculate size")}}),e.random=(e=>e[Math.floor(Math.random()*e.length)]),e.check=((t,s="gi")=>"string"===e.type(t)?new RegExp(t,s):t),e.parse=(t=>{let s={},r=t.match(/([^\n ]*?)=(['"]([^\n'"]*?)['"]|(true|false|yes|no))/gi);if(null==r||e.empty(r))return null;for(let e,t,n=0,l=r.length;n<l;n++)(e=r[n]).includes("=")&&(t=e.search(/=/),s[e.substr(0,t)]=e.substr(t+1).replace(/["']/g,""));return e.empty(s)?null:s}),e.insOf=function(t){return t instanceof e},e.fracture=function(t,s,r){let n,l,i=e.type(this.el[t]);for(l in s)n=null!=r?`${r}-${l}`:l,"object"===e.type(s[l])?e.fracture.call(this,t,s[l],n):"function"===i?this.el[t](n,s[l]):this.el[t][n]=s[l];return this},e.parseEl=((t,s=!1)=>{if(s){let s=(new window.DOMParser).parseFromString(t,"text/html").body.children;return s=1===(s=e.slice(s)).length?s[0]:s}let r,n,l,i;return n=(r=t.substr(t.search(/</),t.search(/>/)+1)).substr(r.search(/</)+1,r.search(/<([^\n ]+)>/.test(r)?/>/:/ /)-1),{attrs:l=(l=r.substr(r.search(/ /)+1,r.search(/>/)))===`<${n}`?null:l,tag:n,text:i=(i=t.substr(r.length,t.search(/<\//)))===r?null:e.empty(i)?null:i}}),e.handoff=((t,s=!1)=>s?e(t):t),e.$=((t,s)=>"string"===e.type(t)?e.handoff(document.querySelector(t),s):t),e.$$=((t,s)=>{if("string"!==e.type(t))return e.handoff(t,s);let r,n;n=[];for(let l=0,i=(r=document.querySelectorAll(t)).length;l<i;l++)n.push(e.handoff(r[l],s));return n}),e.create=((t,s)=>e.handoff(document.createElement(t),s)),e.all=((e,t,...s)=>{for(let r=0,n=e;r<n;r++)e[r][t](...s)}),e.inst=(t=>t instanceof e?t.el:t),e.display=((t,s)=>{let r=e.$(t,!0);r.text=r.text.replace(/-([^\n]*?)-/g,(e,t)=>s[t])}),e.mid=function(e,t,s=2,r=0){switch(!0){case e===t:case 0===s:return e;case 0===r:return e+t/2;case 1===r:default:return(e+t)/2}},e.start=function(){if("string"===e.type(this.el))if(this.el.includes("<")){let t=e.parseEl(this.el);if(this.el=e.create(t.tag),null!=t.attrs){let s=e.parse(t.attrs);null!=s&&this.attr(s)}null==t.text||e.empty(t.text)||this.html(t.text,{parse:!0})}else this.el=e.$(this.el);else this.el=e.$(this.el);if(null!=this.el){switch(this.el="template"===this.tag?this.el.content:this.el,this.cusOps={},!0){case this.el instanceof Document:e.prototype.ready=function(){return this.on("DOMContentLoaded",...arguments),this};break;case this.el instanceof Window:this.doc=this.el.document;break;case"template"===this.tag:e.prototype.clone=function(){return document.importNode(...arguments),this};break;case"canvas"===this.tag:this.ctx=this.context=this.el.getContext("2d"),this.width=this.w=this.el.width,this.height=this.h=this.el.height,Object.defineProperty(this,"resize",{writeable:!1,value(e,t){return e=e||0,t=t||e,this.el.width=e,this.el.height=t,this.width=this.w=this.el.width,this.height=this.h=this.el.height,this}});break;case"form"===this.tag:Object.defineProperty(this,"inputvns",{get(){let t=this.el.elements,s={};for(let r,n=0,l=t.length;n<l;n++)r=t[n],e.empty(r.name)||(null!=s[r.name]?s[r.name+n]=e.empty(r.value)?r.name:r.value:s[r.name]=e.empty(r.value)?r.name:r.value);return s},enumerable:!0});break;case"audio"===this.tag||"video"===this.tag:e.prototype.nsrc=function(t,s){let r=e("<source>");if(r.attr("src",t),null==s)switch(!0){case t.endsWith("mp3"):r.attr("type","audio/mpeg");break;case t.endsWith("ogg"):r.attr("type","audio/ogg")}return this.append(r),this},Object.defineProperties(this,{sources:{get(){let e=this.children,t=[];for(let s=0,r=e.length;s<r;s++)t.push(e[s].attr("src"));return t},enumerable:!0},time:{get(){return this.el.currentTime},set(e){this.el.currentTime=e},enumerable:!0,changeable:!0},duration:{get(){return this.el.duration},enumerable:!0},ended:{get(){return this.el.ended},enumerable:!0},looping:{get(){return this.el.loop},set(e){this.el.loop=e},enumerable:!0,changeable:!0},speed:{get(){return this.el.playbackRate},set(e){this.el.playbackRate=e},enumerable:!0,changeable:!0},persevePitch:{get(){return this.el.preservesPitch},set(e){this.el.preservesPitch=e},enumerable:!0,changeable:!0},preload:{get(){return this.el.preload},set(e){this.el.preload=e},enumerable:!0,changeable:!0},source:{get(){return this.el.currentSrc},enumerable:!0},volume:{get(){return this.el.volume},set(e){this.el.volume=e},enumerable:!0,changeable:!0},paused:{get(){return this.el.paused},enumerable:!0},titles:{get(){return this.sources.map(e=>e.split("/").slice(-1)[0])},enumerable:!0},play:{value(){return this.paused?(this.el.play(),this):(console.warn("Already playing"),this)}},pause:{value(){return this.paused?(console.warn("Already paused"),this):(this.el.pause(),this)}},toggleA:{value(){return this[this.paused?"play":"pause"](),this}},set:{value(e,t){return/speed|volume|looping/i.test(e)?(this[e]=t,this):(console.warn("Only allowed to change speed, volume or if its looping"),this)}}})}return this}console.warn("Was not able to recieve data.")},e.ok=function(e){return 200===e||202===e},e.ajax=function(t){let s=new window.XMLHttpRequest;t.progress=null!=t.progress?t.progress:function(e){console.log(e.lengthComputable?e.loaded/e.total*100+"%":"Can't compute progress")},t.load=null!=t.load?t.load:function(e){console.log("Transfer complete.\n",e)},t.error=null!=t.error?t.error:function(e){console.log("An error has occurred\n"+e)},t.cancel=null!=t.cancel?t.cancel:function(e){console.log("The transfer was canceled\n"+e)},t.data=null!=t.data?t.data:{},t.type=null!=t.type?t.type:"GET",s.addEventListener("progress",t.progress),s.addEventListener("load",function(s){e.ok(this.status,this.readyState)?t.load.call(this,this.response,s):(console.error("Status was faulty",this.status),t.staerr.call(this,this.response,s))}),s.addEventListener("error",t.error),s.addEventListener("abort",t.cancel),!0==(null!=t.progressUpld&&null!=t.loadUpld&&null!=t.errorUpld&&null!=t.cancelUpld)&&(s.upload.addEventListener("progress",t.progressUpld),s.upload.addEventListener("load",function(s){e.ok(this.status,this.readyState)?t.loadUpld.call(this,this.response,s):(console.error("Status was faulty",this.status),t.staerr.call(this,this.response,s))}),s.upload.addEventListener("error",t.errorUpld),s.upload.addEventListener("abort",t.cancelUpld)),t.override&&s.overrideMimeType(t.override),t.typer&&(s.responseType=t.typer);let r=function(){if("string"===e.type(t.data))return t.data;if(e.empty(t.data))return t.url;{let e=[];for(let s in t.data)e.push(`${s}=${t.escape?window.escape(t.data[s]):t.data[s]}`);return"POST"===t.type?e.join("&"):t.url+"?"+e.join("&")}}();return s.open(t.type,"POST"===t.type?t.url:r,t.sync||!0,t.user||null,t.password||null),t.callback&&(s.callback=t.callback),t.fpath&&(s.filepath=t.fpath),t.hdr&&t.hdr.length>1&&s.setRequestHeader(...t.hdr),s.send("POST"===t.type?r:null),s},e.fn=e.prototype={constructor:e,toString(){return this.selector},get tag(){return(this.el.tagName||"UNPARSED-OR-IOS-ELEMENT").toLowerCase()},get hasShadow(){return null!=this.el.shadowRoot},get shadow(){return this.el.shadowRoot},get text(){return this.html()},set text(e){this.html(e)},get children(){let t=e.slice("form"===this.tag?this.el.elements:this.el.children);for(let s=0,r=t.length;s<r;s++)t[s]=e(t[s]);return t},set children(t){if("array"!==e.type(t))throw new Error("Must be an array.");this.append(...t)},get offset(){return{left:this.el.offsetLeft,top:this.el.offsetTop,width:this.el.offsetWidth,height:this.el.offsetHeight}},get center(){return{x:this.offset.left+this.offset.width/2,y:this.offset.top+this.offset.height/2}},get selection(){return{start:this.el.selectionStart,end:this.el.selectionEnd}},set selection(e){this.el.setSelectionRange(...e)},get parent(){return this.el.parentNode||null},set parent(e){this.appendTo(e)},get data(){return this.el.dataset},get events(){return this.el.events},get classes(){return e.slice(this.el.classList)},set classes(e){return this.toggle(e)},get attrs(){let t={},s=e.slice(this.el.attributes);for(let e of s)t[e.name]=e.value;return t},set attrs(e){this.attr(e)},get selector(){let t,s=this.attrs,r="",n=null!=this.attr("id")?`#${this.attr("id")}`:"",l=null!=this.attr("class")?`.${this.classes.join(".")}`:"";for(t in s)/class|id|style/i.test(t)||(r+=`[${t}="${s[t]}"]`);return`${this.tag}${n}${l}${e.empty(r)?"":r}`},get size(){return this.el.getBoundingClientRect()},get hidden(){return"none"===this.css("display")},get ops(){return{parseIt:this.cusOps.parseIt||!1,app:this.cusOps.app||!1,parse:this.cusOps.parse||!1}},set ops(e){let t=null!=e;return this.cusOps={parseIt:t&&e.parseIt||!1,app:t&&e.app||!1,parse:t&&e.parse||!1},this.cusOps},get siblings(){return{next:this.el.nextSibling,previous:this.el.previousSibling}},shadow(e){return console.warn("This function is not fully developed"),this},clone(t=!0,s){return e.handoff(this.el.cloneNode(t),s)},html(t,s){let r,n,l;if(({parse:r,app:n}=null==s?e.empty(this.cusOps)?this.ops:this.cusOps:s),l=/input|option|textarea/i.test(this.tag)?"value":r?"innerHTML":null!=this.el.textContent?"textContent":"innerText",e.pipeline(arguments,e.slice,e.empty))return this.el[l];{let e=n?this.el[l]+t:t;return this.el[l]=e,"option"===this.tag&&(this.el.innerHTML=this.el[l]),this}},attr(t,s){if(null==t)return this.attrs;switch(!0){case"object"===e.type(t):return e.fracture.call(this,"setAttribute",t);case"boolean"===e.type(s):return this.el.removeAttribute(t),this;case null!=s:return this.el.setAttribute(t,s),this;default:return this.el.getAttribute(t)}},css(t,s){if(null==t)return this.el.style;switch(!0){case"object"===e.type(t):return e.fracture.call(this,"style",t);case"boolean"===e.type(s):this.el.style[e.cc(t)]="";break;case null!=s:return this.el.style[e.cc(t)]=s,this;default:return this.el.style[t]}},on(e,t,s,r){return s=null!=s&&s,this.el.events=this.el.events||{},this.el.addEventListener(e,e=>{t.call(this,e,this)},s),this.el.events[e]={},this.el.events[e][null!=r?r:t.name||"func"]={cp:s,func:t},this},off(e,t,s){return this.el.removeEventListener(e,null!=t?this.el.events[e][t].func:s.name),delete this.el.events[e][null!=t?t:s.name||"func"],this},fire(e){return this.el.dispatchEvent(e)},insert(t=!0,s,...r){s=s instanceof e?s:e(s);let n="string"===e.type(t)?"before"===t?s.el:s.siblings.next:t?s.el:s.siblings.next;for(let t of r)t=e.$(t),e.inst(t).parentNode!==this.el?s.parent.insertBefore(e.inst(t),n):console.warn("("+t+") is already a child of "+this);return this},append(...t){for(let s,r=0,n=t.length;r<n;r++)s=e.$(t[r]),e.inst(s).parentNode!==this.el?this.el.appendChild(e.inst(s)):console.warn("("+s+") is already a child of "+this);return this},appendTo(t){return t="string"===e.type(t)?e.$(t,!0):t,e(t).append(this),this},remove(){let t=e.slice(arguments);if("boolean"===e.type(t[0])){if(!t[0])return this;null!=this.parent?this.parent.removeChild(this.el):console.warn("This element ("+this+") has no parent")}else{if(1===t.length&&"string"===e.type(t[0])&&"all"===t[0]){for(let e of this.children)e.remove(!0);return this}for(let s of t)switch(!0){case"object"===e.type(s)&&s instanceof e:s.remove(!0);break;case"object"===e.type(s)&&!(s instanceof e):s.parentNode.removeChild(this.el);break;default:if(null==(s=e.$(s))){console.warn(`Couldn't find ${s}`);continue}this.el.removeChild(e.inst(s))}}return this},$(t,s){let r=null!=s?s:this.ops.parseIt;return e.handoff(this.el.querySelector(t),r)},$$(t,s){let r,n,l;r=null!=s?s:this.ops.parseIt,n=this.el.querySelectorAll(t),l=[];for(let t of n)l.push(e.handoff(t,r));return l},create(t,s){return t=e(t),this.append(t),"parent"===s?this:"child"===s?t:this},toggle(...e){for(let t of e)this.el.classList.toggle(t);return this},hasClass(e){for(let t of this.classes)if(t===e)return!0;return!1}},window.pen=e,window.pDoc=e(document),window.pWin=e(window),window.head=document.head,window.pHead=e(window.head),document.body?(window.body=document.body,window.pBody=e(window.body)):document.addEventListener("DOMContentLoaded",()=>{window.body=document.body,window.pBody=e(window.body)},{once:!0})}();
